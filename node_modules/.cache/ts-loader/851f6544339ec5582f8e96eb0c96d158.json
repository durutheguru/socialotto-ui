{"remainingRequest":"/Users/dduru/IdeaProjects/Private/OmarzeUI/node_modules/babel-loader/lib/index.js!/Users/dduru/IdeaProjects/Private/OmarzeUI/node_modules/ts-loader/index.js??ref--13-2!/Users/dduru/IdeaProjects/Private/OmarzeUI/src/router/util/guard.ts","dependencies":[{"path":"/Users/dduru/IdeaProjects/Private/OmarzeUI/src/router/util/guard.ts","mtime":1584736552003},{"path":"/Users/dduru/IdeaProjects/Private/OmarzeUI/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/dduru/IdeaProjects/Private/OmarzeUI/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/dduru/IdeaProjects/Private/OmarzeUI/node_modules/ts-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc29tZSI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9kZHVydS9JZGVhUHJvamVjdHMvUHJpdmF0ZS9PbWFyemVVSS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBzdG9yZSBmcm9tICcuLi8uLi9zdG9yZSc7CmltcG9ydCB7IExvZywgV2ViLCBVdGlsIH0gZnJvbSAnLi4vLi4vY29tcG9uZW50cy91dGlsJzsKCnZhciBhdXRoUm91dGUgPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uICgpIHsKICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKAogIC8qI19fUFVSRV9fKi8KICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKHRvLCBuZXh0KSB7CiAgICB2YXIgYXV0aGVudGljYXRlZDsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgTG9nLmluZm8oJ0F1dGggTG9nZ2VkIEluOiAnICsgc3RvcmUuZ2V0dGVyc1snYXV0aFRva2VuL2xvZ2dlZEluJ10pOwoKICAgICAgICAgICAgaWYgKCFzdG9yZS5nZXR0ZXJzWydhdXRoVG9rZW4vbG9nZ2VkSW4nXSkgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA4OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgICAgcmV0dXJuIHN0b3JlLmRpc3BhdGNoKCdhdXRoVG9rZW4vYXV0aGVudGljYXRlJyk7CgogICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICBhdXRoZW50aWNhdGVkID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgIGlmICghYXV0aGVudGljYXRlZCkgewogICAgICAgICAgICAgIG5hdmlnYXRlTG9naW4odG8sIG5leHQpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIG5hdmlnYXRlUGF0aChuZXh0KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDk7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgbmF2aWdhdGVMb2dpbih0bywgbmV4dCk7CgogICAgICAgICAgY2FzZSA5OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUpOwogIH0pKTsKCiAgcmV0dXJuIGZ1bmN0aW9uIGF1dGhSb3V0ZShfeCwgX3gyKSB7CiAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07Cn0oKTsKCnZhciBuYXZpZ2F0ZUxvZ2luID0gZnVuY3Rpb24gbmF2aWdhdGVMb2dpbih0bywgbmV4dCkgewogIHN0b3JlLmNvbW1pdCgnZW50cnlVcmwnLCB0by5wYXRoKTsKICBXZWIubmF2aWdhdGUoJy9sb2dpbicpOwp9OwoKdmFyIG5hdmlnYXRlUGF0aCA9IGZ1bmN0aW9uIG5hdmlnYXRlUGF0aChuZXh0KSB7CiAgdmFyIHVybCA9IHN0b3JlLmdldHRlcnMuZW50cnlVcmw7CgogIGlmIChVdGlsLmlzVmFsaWRTdHJpbmcodXJsKSkgewogICAgbmV4dCh1cmwpOwogICAgc3RvcmUuY29tbWl0KCdlbnRyeVVybCcsIG51bGwpOwogIH0gZWxzZSB7CiAgICBuZXh0KCk7CiAgfQp9OwoKZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKHRvLCBmcm9tLCBuZXh0KSB7CiAgaWYgKHRvLm1hdGNoZWQuc29tZShmdW5jdGlvbiAocmVjb3JkKSB7CiAgICByZXR1cm4gcmVjb3JkLm1ldGEuc2tpcEF1dGg7CiAgfSkpIHsKICAgIG5leHQoKTsKICAgIHJldHVybjsKICB9CgogIGF1dGhSb3V0ZSh0bywgbmV4dCk7Cn0="},{"version":3,"sources":["/Users/dduru/IdeaProjects/Private/OmarzeUI/src/router/util/guard.ts"],"names":[],"mappings":";;;AAAA,OAAO,KAAP,MAAkB,aAAlB;AACA,SAAS,GAAT,EAAc,GAAd,EAAmB,IAAnB,QAA+B,uBAA/B;;AAGA,IAAM,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA,0BAAG,iBAAO,EAAP,EAAgB,IAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AACd,YAAA,GAAG,CAAC,IAAJ,CAAS,qBAAqB,KAAK,CAAC,OAAN,CAAc,oBAAd,CAA9B;;AADc,iBAGV,KAAK,CAAC,OAAN,CAAc,oBAAd,CAHU;AAAA;AAAA;AAAA;;AAAA;AAAA,mBAIkB,KAAK,CAAC,QAAN,CAAe,wBAAf,CAJlB;;AAAA;AAIJ,YAAA,aAJI;;AAKV,gBAAI,CAAC,aAAL,EAAoB;AAChB,cAAA,aAAa,CAAC,EAAD,EAAK,IAAL,CAAb;AACH,aAFD,MAEO;AACH,cAAA,YAAY,CAAC,IAAD,CAAZ;AACH;;AATS;AAAA;;AAAA;AAWV,YAAA,aAAa,CAAC,EAAD,EAAK,IAAL,CAAb;;AAXU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAT,SAAS;AAAA;AAAA;AAAA,GAAf;;AAgBA,IAAM,aAAa,GAAG,SAAhB,aAAgB,CAAC,EAAD,EAAU,IAAV,EAAuB;AACzC,EAAA,KAAK,CAAC,MAAN,CAAa,UAAb,EAAyB,EAAE,CAAC,IAA5B;AACA,EAAA,GAAG,CAAC,QAAJ,CAAa,QAAb;AACH,CAHD;;AAMA,IAAM,YAAY,GAAG,SAAf,YAAe,CAAC,IAAD,EAAc;AAC/B,MAAM,GAAG,GAAG,KAAK,CAAC,OAAN,CAAc,QAA1B;;AAEA,MAAI,IAAI,CAAC,aAAL,CAAmB,GAAnB,CAAJ,EAA6B;AACzB,IAAA,IAAI,CAAC,GAAD,CAAJ;AACA,IAAA,KAAK,CAAC,MAAN,CAAa,UAAb,EAAyB,IAAzB;AACH,GAHD,MAGO;AACH,IAAA,IAAI;AACP;AACJ,CATD;;AAYA,eAAc,UAAU,EAAV,EAAmB,IAAnB,EAA8B,IAA9B,EAAuC;AACjD,MAAI,EAAE,CAAC,OAAH,CAAW,IAAX,CAAgB,UAAC,MAAD;AAAA,WAAiB,MAAM,CAAC,IAAP,CAAY,QAA7B;AAAA,GAAhB,CAAJ,EAA4D;AACxD,IAAA,IAAI;AACJ;AACH;;AAED,EAAA,SAAS,CAAC,EAAD,EAAK,IAAL,CAAT;AACH","sourcesContent":["import store from '../../store';\nimport { Log, Web, Util } from '../../components/util';\n\n\nconst authRoute = async (to: any, next: any) => {\n    Log.info('Auth Logged In: ' + store.getters['authToken/loggedIn']);\n\n    if (store.getters['authToken/loggedIn']) {\n        const authenticated = await store.dispatch('authToken/authenticate');\n        if (!authenticated) {\n            navigateLogin(to, next);\n        } else {\n            navigatePath(next);\n        }\n    } else {\n        navigateLogin(to, next);\n    }\n};\n\n\nconst navigateLogin = (to: any, next: any) => {\n    store.commit('entryUrl', to.path);\n    Web.navigate('/login');\n};\n\n\nconst navigatePath = (next: any) => {\n    const url = store.getters.entryUrl;\n\n    if (Util.isValidString(url)) {\n        next(url);\n        store.commit('entryUrl', null);\n    } else {\n        next();\n    }\n};\n\n\nexport default function(to: any, from: any, next: any) {\n    if (to.matched.some((record: any) => record.meta.skipAuth)) {\n        next();\n        return;\n    }\n\n    authRoute(to, next);\n}\n\n"],"sourceRoot":""}]}