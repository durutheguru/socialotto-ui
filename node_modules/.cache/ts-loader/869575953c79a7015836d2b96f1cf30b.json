{"remainingRequest":"/Users/dduru/VSCode/OmarzeUI/node_modules/babel-loader/lib/index.js!/Users/dduru/VSCode/OmarzeUI/node_modules/ts-loader/index.js??ref--13-2!/Users/dduru/VSCode/OmarzeUI/src/router/util/guard.ts","dependencies":[{"path":"/Users/dduru/VSCode/OmarzeUI/src/router/util/guard.ts","mtime":1585087862158},{"path":"/Users/dduru/VSCode/OmarzeUI/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/dduru/VSCode/OmarzeUI/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/dduru/VSCode/OmarzeUI/node_modules/ts-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc29tZSI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9kZHVydS9WU0NvZGUvT21hcnplVUkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgc3RvcmUgZnJvbSAnLi4vLi4vc3RvcmUnOwppbXBvcnQgeyBMb2csIFdlYiwgVXRpbCB9IGZyb20gJy4uLy4uL2NvbXBvbmVudHMvdXRpbCc7Cgp2YXIgYXV0aFJvdXRlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSh0bywgbmV4dCkgewogICAgdmFyIGF1dGhlbnRpY2F0ZWQ7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIExvZy5pbmZvKCdBdXRoIExvZ2dlZCBJbjogJyArIHN0b3JlLmdldHRlcnNbJ2F1dGhUb2tlbi9sb2dnZWRJbiddKTsKCiAgICAgICAgICAgIGlmICghc3RvcmUuZ2V0dGVyc1snYXV0aFRva2VuL2xvZ2dlZEluJ10pIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gODsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICAgIHJldHVybiBzdG9yZS5kaXNwYXRjaCgnYXV0aFRva2VuL2F1dGhlbnRpY2F0ZScpOwoKICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgYXV0aGVudGljYXRlZCA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICBpZiAoIWF1dGhlbnRpY2F0ZWQpIHsKICAgICAgICAgICAgICBuYXZpZ2F0ZUxvZ2luKHRvLCBuZXh0KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBuYXZpZ2F0ZVBhdGgobmV4dCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA5OwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgIG5hdmlnYXRlTG9naW4odG8sIG5leHQpOwoKICAgICAgICAgIGNhc2UgOToKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlKTsKICB9KSk7CgogIHJldHVybiBmdW5jdGlvbiBhdXRoUm91dGUoX3gsIF94MikgewogICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9Owp9KCk7Cgp2YXIgbmF2aWdhdGVMb2dpbiA9IGZ1bmN0aW9uIG5hdmlnYXRlTG9naW4odG8sIG5leHQpIHsKICBzdG9yZS5jb21taXQoJ2VudHJ5VXJsJywgdG8ucGF0aCk7CiAgV2ViLm5hdmlnYXRlKCcvbG9naW4nKTsKfTsKCnZhciBuYXZpZ2F0ZVBhdGggPSBmdW5jdGlvbiBuYXZpZ2F0ZVBhdGgobmV4dCkgewogIHZhciB1cmwgPSBzdG9yZS5nZXR0ZXJzLmVudHJ5VXJsOwoKICBpZiAoVXRpbC5pc1ZhbGlkU3RyaW5nKHVybCkpIHsKICAgIG5leHQodXJsKTsKICAgIHN0b3JlLmNvbW1pdCgnZW50cnlVcmwnLCBudWxsKTsKICB9IGVsc2UgewogICAgbmV4dCgpOwogIH0KfTsKCmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uICh0bywgZnJvbSwgbmV4dCkgewogIGlmICh0by5tYXRjaGVkLnNvbWUoZnVuY3Rpb24gKHJlY29yZCkgewogICAgcmV0dXJuIHJlY29yZC5tZXRhLnNraXBBdXRoOwogIH0pKSB7CiAgICBuZXh0KCk7CiAgICByZXR1cm47CiAgfQoKICBhdXRoUm91dGUodG8sIG5leHQpOwp9"},{"version":3,"sources":["/Users/dduru/VSCode/OmarzeUI/src/router/util/guard.ts"],"names":[],"mappings":";;;AAAA,OAAO,KAAP,MAAkB,aAAlB;AACA,SAAS,GAAT,EAAc,GAAd,EAAmB,IAAnB,QAA+B,uBAA/B;;AAGA,IAAM,SAAS;AAAA,qEAAG,iBAAO,EAAP,EAAgB,IAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AACd,YAAA,GAAG,CAAC,IAAJ,CAAS,qBAAqB,KAAK,CAAC,OAAN,CAAc,oBAAd,CAA9B;;AADc,iBAGV,KAAK,CAAC,OAAN,CAAc,oBAAd,CAHU;AAAA;AAAA;AAAA;;AAAA;AAAA,mBAIkB,KAAK,CAAC,QAAN,CAAe,wBAAf,CAJlB;;AAAA;AAIJ,YAAA,aAJI;;AAKV,gBAAI,CAAC,aAAL,EAAoB;AAChB,cAAA,aAAa,CAAC,EAAD,EAAK,IAAL,CAAb;AACH,aAFD,MAEO;AACH,cAAA,YAAY,CAAC,IAAD,CAAZ;AACH;;AATS;AAAA;;AAAA;AAWV,YAAA,aAAa,CAAC,EAAD,EAAK,IAAL,CAAb;;AAXU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAT,SAAS;AAAA;AAAA;AAAA,GAAf;;AAgBA,IAAM,aAAa,GAAG,SAAhB,aAAgB,CAAC,EAAD,EAAU,IAAV,EAAuB;AACzC,EAAA,KAAK,CAAC,MAAN,CAAa,UAAb,EAAyB,EAAE,CAAC,IAA5B;AACA,EAAA,GAAG,CAAC,QAAJ,CAAa,QAAb;AACH,CAHD;;AAMA,IAAM,YAAY,GAAG,SAAf,YAAe,CAAC,IAAD,EAAc;AAC/B,MAAM,GAAG,GAAG,KAAK,CAAC,OAAN,CAAc,QAA1B;;AAEA,MAAI,IAAI,CAAC,aAAL,CAAmB,GAAnB,CAAJ,EAA6B;AACzB,IAAA,IAAI,CAAC,GAAD,CAAJ;AACA,IAAA,KAAK,CAAC,MAAN,CAAa,UAAb,EAAyB,IAAzB;AACH,GAHD,MAGO;AACH,IAAA,IAAI;AACP;AACJ,CATD;;AAYA,eAAc,UAAU,EAAV,EAAmB,IAAnB,EAA8B,IAA9B,EAAuC;AACjD,MAAI,EAAE,CAAC,OAAH,CAAW,IAAX,CAAgB,UAAC,MAAD;AAAA,WAAiB,MAAM,CAAC,IAAP,CAAY,QAA7B;AAAA,GAAhB,CAAJ,EAA4D;AACxD,IAAA,IAAI;AACJ;AACH;;AAED,EAAA,SAAS,CAAC,EAAD,EAAK,IAAL,CAAT;AACH","sourcesContent":["import store from '../../store';\nimport { Log, Web, Util } from '../../components/util';\n\n\nconst authRoute = async (to: any, next: any) => {\n    Log.info('Auth Logged In: ' + store.getters['authToken/loggedIn']);\n\n    if (store.getters['authToken/loggedIn']) {\n        const authenticated = await store.dispatch('authToken/authenticate');\n        if (!authenticated) {\n            navigateLogin(to, next);\n        } else {\n            navigatePath(next);\n        }\n    } else {\n        navigateLogin(to, next);\n    }\n};\n\n\nconst navigateLogin = (to: any, next: any) => {\n    store.commit('entryUrl', to.path);\n    Web.navigate('/login');\n};\n\n\nconst navigatePath = (next: any) => {\n    const url = store.getters.entryUrl;\n\n    if (Util.isValidString(url)) {\n        next(url);\n        store.commit('entryUrl', null);\n    } else {\n        next();\n    }\n};\n\n\nexport default function(to: any, from: any, next: any) {\n    if (to.matched.some((record: any) => record.meta.skipAuth)) {\n        next();\n        return;\n    }\n\n    authRoute(to, next);\n}\n\n"],"sourceRoot":""}]}