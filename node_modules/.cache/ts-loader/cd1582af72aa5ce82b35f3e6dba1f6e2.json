{"remainingRequest":"/Users/dduru/VSCode/OmarzeUI/node_modules/babel-loader/lib/index.js!/Users/dduru/VSCode/OmarzeUI/node_modules/ts-loader/index.js??ref--13-2!/Users/dduru/VSCode/OmarzeUI/src/vues/login/LoginComponent.ts","dependencies":[{"path":"/Users/dduru/VSCode/OmarzeUI/src/vues/login/LoginComponent.ts","mtime":1590279613475},{"path":"/Users/dduru/VSCode/OmarzeUI/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/dduru/VSCode/OmarzeUI/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/dduru/VSCode/OmarzeUI/node_modules/ts-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvVXNlcnMvZGR1cnUvVlNDb2RlL09tYXJ6ZVVJL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiL1VzZXJzL2RkdXJ1L1ZTQ29kZS9PbWFyemVVSS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiOwppbXBvcnQgX2luaGVyaXRzIGZyb20gIi9Vc2Vycy9kZHVydS9WU0NvZGUvT21hcnplVUkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2luaGVyaXRzIjsKaW1wb3J0IF9jcmVhdGVTdXBlciBmcm9tICIvVXNlcnMvZGR1cnUvVlNDb2RlL09tYXJ6ZVVJL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVTdXBlciI7CmltcG9ydCB7IF9fZGVjb3JhdGUgfSBmcm9tICJ0c2xpYiI7CmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJ3Z1ZS1wcm9wZXJ0eS1kZWNvcmF0b3InOwppbXBvcnQgQmFzZVZ1ZSBmcm9tICcuLi8uLi9jb21wb25lbnRzL0Jhc2VWdWUnOwppbXBvcnQgeyBMb2cgfSBmcm9tICcuLi8uLi9jb21wb25lbnRzL3V0aWwnOwppbXBvcnQgJ0AvY29tcG9uZW50cy91dGlsL1ZhbGlkYXRpb24nOwppbXBvcnQgVXNlckF1dGhDb250ZXh0IGZyb20gJ0AvY29tcG9uZW50cy9hdXRoL1VzZXJBdXRoQ29udGV4dCc7CmltcG9ydCBMb2dpblNlcnZpY2UgZnJvbSAnLi9zZXJ2aWNlL0xvZ2luU2VydmljZSc7CmltcG9ydCBXaXRoUmVuZGVyIGZyb20gJy4vbG9naW4uaHRtbCc7CmltcG9ydCBzdG9yZSBmcm9tICdAL3N0b3JlJzsKCnZhciBMb2dpbkNvbXBvbmVudCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX0Jhc2VWdWUpIHsKICBfaW5oZXJpdHMoTG9naW5Db21wb25lbnQsIF9CYXNlVnVlKTsKCiAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlcihMb2dpbkNvbXBvbmVudCk7CgogIGZ1bmN0aW9uIExvZ2luQ29tcG9uZW50KCkgewogICAgdmFyIF90aGlzOwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBMb2dpbkNvbXBvbmVudCk7CgogICAgX3RoaXMgPSBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIF90aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgIF90aGlzLnVzZXJuYW1lID0gJyc7CiAgICBfdGhpcy5wYXNzd29yZCA9ICcnOwogICAgX3RoaXMubG9naW5FcnJvciA9ICcnOwogICAgcmV0dXJuIF90aGlzOwogIH0KCiAgX2NyZWF0ZUNsYXNzKExvZ2luQ29tcG9uZW50LCBbewogICAga2V5OiAiZG9Mb2dpbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZG9Mb2dpbigpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICB0aGlzLmxvZ2luRXJyb3IgPSAnJzsKICAgICAgTG9naW5TZXJ2aWNlLmRvTG9naW4oewogICAgICAgIHVzZXJuYW1lOiB0aGlzLnVzZXJuYW1lLAogICAgICAgIHBhc3N3b3JkOiB0aGlzLnBhc3N3b3JkCiAgICAgIH0sIGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzMi5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgc3RvcmUuY29tbWl0KCdhdXRoVG9rZW4vYXBpVG9rZW4nLCByZXNwb25zZS5oZWFkZXJzLmF1dGhvcml6YXRpb24pOwoKICAgICAgICBfdGhpczIuJHJvdXRlci5wdXNoKHsKICAgICAgICAgIHBhdGg6IFVzZXJBdXRoQ29udGV4dC5nZXRJbnN0YW5jZSgpLmhvbWVVcmwoKQogICAgICAgIH0pOwoKICAgICAgICBMb2cuaW5mbygnTG9nZ2VkIEluOiAnICsgSlNPTi5zdHJpbmdpZnkocmVzcG9uc2UpKTsKICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgX3RoaXMyLmxvYWRpbmcgPSBmYWxzZTsKCiAgICAgICAgX3RoaXMyLmV4dHJhY3RMb2dpbkVycm9yKGVycm9yKTsKCiAgICAgICAgTG9nLmVycm9yKCdMb2dnZWQgRXJyb3I6ICcgKyBKU09OLnN0cmluZ2lmeShlcnJvcikpOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJleHRyYWN0TG9naW5FcnJvciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZXh0cmFjdExvZ2luRXJyb3IoZXJyb3IpIHsKICAgICAgaWYgKGVycm9yLnJlc3BvbnNlKSB7CiAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxKSB7CiAgICAgICAgICB0aGlzLmxvZ2luRXJyb3IgPSAnSW52YWxpZCBVc2VybmFtZSAvIFBhc3N3b3JkJzsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9IGVsc2UgaWYgKGVycm9yLnJlc3BvbnNlLnN0YXR1cyA9PT0gMCkgewogICAgICAgICAgdGhpcy5sb2dpbkVycm9yID0gJ0Nhbm5vdCBSZWFjaCBTZXJ2ZXInOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5sb2dpbkVycm9yID0gJ1Vua25vd24gRXJyb3IgT2NjdXJyZWQnOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIExvZ2luQ29tcG9uZW50Owp9KEJhc2VWdWUpOwoKTG9naW5Db21wb25lbnQgPSBfX2RlY29yYXRlKFtXaXRoUmVuZGVyLCBDb21wb25lbnRdLCBMb2dpbkNvbXBvbmVudCk7CmV4cG9ydCBkZWZhdWx0IExvZ2luQ29tcG9uZW50Ow=="},{"version":3,"sources":["/Users/dduru/VSCode/OmarzeUI/src/vues/login/LoginComponent.ts"],"names":[],"mappings":";;;;;AAAA,SAAS,SAAT,QAA0B,wBAA1B;AAEA,OAAO,OAAP,MAAoB,0BAApB;AACA,SAAS,GAAT,QAAoB,uBAApB;AACA,OAAO,8BAAP;AACA,OAAO,eAAP,MAA4B,mCAA5B;AAEA,OAAO,YAAP,MAAyB,wBAAzB;AAEA,OAAO,UAAP,MAAuB,cAAvB;AACA,OAAO,KAAP,MAAkB,SAAlB;;AAKA,IAAqB,cAArB;AAAA;;AAAA;;AAAA,4BAAA;AAAA;;AAAA;;;AAEY,UAAA,OAAA,GAAmB,KAAnB;AAEA,UAAA,QAAA,GAAmB,EAAnB;AAEA,UAAA,QAAA,GAAmB,EAAnB;AAEA,UAAA,UAAA,GAAqB,EAArB;AARZ;AAoDC;;AApDD;AAAA;AAAA,8BAWmB;AAAA;;AACX,WAAK,OAAL,GAAe,IAAf;AACA,WAAK,UAAL,GAAkB,EAAlB;AAEA,MAAA,YAAY,CAAC,OAAb,CACI;AACI,QAAA,QAAQ,EAAE,KAAK,QADnB;AAEI,QAAA,QAAQ,EAAE,KAAK;AAFnB,OADJ,EAMI,UAAC,QAAD,EAAkB;AACd,QAAA,MAAI,CAAC,OAAL,GAAe,KAAf;AACA,QAAA,KAAK,CAAC,MAAN,CAAa,oBAAb,EAAmC,QAAQ,CAAC,OAAT,CAAiB,aAApD;;AACA,QAAA,MAAI,CAAC,OAAL,CAAa,IAAb,CAAkB;AAAC,UAAA,IAAI,EAAE,eAAe,CAAC,WAAhB,GAA8B,OAA9B;AAAP,SAAlB;;AACA,QAAA,GAAG,CAAC,IAAJ,CAAS,gBAAgB,IAAI,CAAC,SAAL,CAAe,QAAf,CAAzB;AACH,OAXL,EAaI,UAAC,KAAD,EAAe;AACX,QAAA,MAAI,CAAC,OAAL,GAAe,KAAf;;AACA,QAAA,MAAI,CAAC,iBAAL,CAAuB,KAAvB;;AACA,QAAA,GAAG,CAAC,KAAJ,CAAU,mBAAmB,IAAI,CAAC,SAAL,CAAe,KAAf,CAA7B;AACH,OAjBL;AAmBH;AAlCL;AAAA;AAAA,sCAqC8B,KArC9B,EAqCwC;AAChC,UAAI,KAAK,CAAC,QAAV,EAAoB;AAChB,YAAI,KAAK,CAAC,QAAN,CAAe,MAAf,KAA0B,GAA9B,EAAmC;AAC/B,eAAK,UAAL,GAAkB,6BAAlB;AACA;AACH,SAHD,MAGO,IAAI,KAAK,CAAC,QAAN,CAAe,MAAf,KAA0B,CAA9B,EAAiC;AACpC,eAAK,UAAL,GAAkB,qBAAlB;AACA;AACH;AACJ;;AAED,WAAK,UAAL,GAAkB,wBAAlB;AACH;AAjDL;;AAAA;AAAA,EAA4C,OAA5C,CAAA;;AAAqB,cAAc,GAAA,UAAA,CAAA,CAFlC,UAEkC,EADlC,SACkC,CAAA,EAAd,cAAc,CAAd;eAAA,c","sourcesContent":["import { Component } from 'vue-property-decorator';\n\nimport BaseVue from '../../components/BaseVue';\nimport { Log } from '../../components/util';\nimport '@/components/util/Validation';\nimport UserAuthContext from '@/components/auth/UserAuthContext';\n\nimport LoginService from './service/LoginService';\n\nimport WithRender from './login.html';\nimport store from '@/store';\n\n\n@WithRender\n@Component\nexport default class LoginComponent extends BaseVue {\n\n    private loading: boolean = false;\n\n    private username: string = '';\n\n    private password: string = '';\n\n    private loginError: string = '';\n\n\n    private doLogin() {\n        this.loading = true;\n        this.loginError = '';\n\n        LoginService.doLogin(\n            {\n                username: this.username,\n                password: this.password,\n            },\n\n            (response: any) => {\n                this.loading = false;\n                store.commit('authToken/apiToken', response.headers.authorization);\n                this.$router.push({path: UserAuthContext.getInstance().homeUrl()});\n                Log.info('Logged In: ' + JSON.stringify(response));\n            },\n\n            (error: any) => {\n                this.loading = false;\n                this.extractLoginError(error);\n                Log.error('Logged Error: ' + JSON.stringify(error));\n            },\n        );\n    }\n\n\n    private extractLoginError(error: any) {\n        if (error.response) {\n            if (error.response.status === 401) {\n                this.loginError = 'Invalid Username / Password';\n                return;\n            } else if (error.response.status === 0) {\n                this.loginError = 'Cannot Reach Server';\n                return;\n            }\n        }\n\n        this.loginError = 'Unknown Error Occurred';\n    }\n\n\n}\n"],"sourceRoot":""}]}