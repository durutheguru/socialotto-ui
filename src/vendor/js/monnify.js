!function(){var o,e;Element.prototype.addEventListener||(o=[],e=function(e,t){var n,a,i=this,r=function(e){e.target=e.srcElement,e.currentTarget=i,"undefined"!=typeof t.handleEvent?t.handleEvent(e):t.call(i,e)};"DOMContentLoaded"===e?(n=function(e){"complete"===document.readyState&&r(e)},document.attachEvent("onreadystatechange",n),o.push({object:this,type:e,listener:t,wrapper:n}),"complete"===document.readyState&&((a=new Event).srcElement=window,n(a))):(this.attachEvent("on"+e,r),o.push({object:this,type:e,listener:t,wrapper:r}))},Element.prototype.addEventListener=e,HTMLDocument&&(HTMLDocument.prototype.addEventListener=e),Window&&(Window.prototype.addEventListener=e))}();var MonnifySDK=function(){var CONSTANT={StageId:"MonnifyFrame",StageName:"MonnifyFrame",PaymentFormName:"MonnifyPaymentForm",StyleId:"MonnifyStyles",PreLoaderId:"MonnifyPreLoader",LoadedMessageType:"MonnifyPopupLoaded",ClosePopupMessageType:"MonnifyPopupClose",TransactionCompletedMessageType:"MonnifyPopupComplete",AttributePrefix:"data-monnify-",MonnifyButtonIdentifier:"monnify-payment-buttons"},isTestMode=function(e){return!(e&&e.apiKey&&e.apiKey.indexOf)||-1===e.apiKey.indexOf("MK_PROD_")},getConfiguration=function(e){return isTestMode(e)?e.compatibilityMode?{APP_URL:"https://sandbox.sdk.monnify.com/compatibility-mode",APP_ORIGIN:"https://sandbox.sdk.monnify.com"}:{APP_URL:"https://sandbox.sdk.monnify.com",APP_ORIGIN:"https://sandbox.sdk.monnify.com"}:e.compatibilityMode?{APP_URL:"https://sdk.monnify.com/compatibility-mode",APP_ORIGIN:"https://sdk.monnify.com"}:{APP_URL:"https://sdk.monnify.com",APP_ORIGIN:"https://sdk.monnify.com"}},paymentDataPrototype={amount:0,currency:"NGN",reference:"",customerFullName:"",customerEmail:"",customerMobileNumber:"",paymentDescription:"",apiKey:"",contractCode:"",metadata:{},incomeSplitConfig:[],compatibilityMode:!1,paymentMethods:[],onComplete:function(){},onClose:function(){}},stageData={stageDOM:null,preLoader:null},initializeSDK=function(e){var t,n=setPaymentParam(e);validatePaymentData(n)&&(setupStyles(),setupLoader(),setupStage(),setupPaymentForm(n),show(stageData.preLoader),addMessageListener(n),(t=document.forms[CONSTANT.PaymentFormName])&&t.submit())},validatePaymentData=function(e){if(!e)return console.error("Monnify: Invalid Payment Data."),!1;var t=!0;return e.customerEmail&&isValidEmail(e.customerEmail)||(t=!1,console.error("Monnify: Invalid Customer Email.")),e.amount&&isNumeric(e.amount)||(t=!1,console.error("Monnify: Invalid Amount.")),e.contractCode||(t=!1,console.error("Monnify: Invalid Contract Code")),e.apiKey||(t=!1,console.error("Monnify: Invalid API Key")),e.onClose&&!isFunction(e.onClose)&&(t=!1,console.error("Monnify: Invalid onClose function.")),e.onComplete&&!isFunction(e.onComplete)&&(t=!1,console.error("Monnify: Invalid onComplete function.")),e.metadata&&!isObject(e.metadata)&&(t=!1,console.error("Monnify: Invalid metadata.")),t},isValidEmail=function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)},isObject=function(e){return e===Object(e)&&"[object Array]"!==Object.prototype.toString.call(e)},isArray=function(e){return e.constructor===Array},isInteger=function(e){return parseInt(e)==e&&0<=e},isNumeric=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},isFunction=function(e){return!!e&&(e&&"[object Function]"==={}.toString.call(e))},generateReference=function(e){var t="MNFY|PAYREF|"+(isTestMode(e)?"TEST|":"");return t+="GENERATED|"+(new Date).valueOf()+Math.floor(1e6*Math.random()+1)},setPaymentParam=function(e){if(!e)return paymentDataPrototype;var t={};for(var n in paymentDataPrototype){var a=e[n];t[n]=a?"onComplete"===n||"onClose"===n?parseFunction(a):a:paymentDataPrototype[n]}return(!t.reference||t.reference.length<1)&&(t.reference=generateReference(t)),t},setupStage=function(){var e,t,n=document.getElementById(CONSTANT.StageId);n?stageData.stageDOM=n:(e=document.body,(t=document.createElement("iframe")).id=CONSTANT.StageId,t.name=CONSTANT.StageName,t.className="hide",e.appendChild(t),stageData.stageDOM=document.getElementById(CONSTANT.StageId))},setupStyles=function(){var e='#MonnifyFrame,#MonnifyPreLoader{position:fixed;top:0;left:0;width:100%;height:100%;z-index:2147483647;margin:0;padding:0;border:none;outline:0}.hide{display:none;visibility:hidden}.show{display:block;visibility:visible}#MonnifyPreLoader{background:rgba(53,53,53,.92);text-align:center;transition-property:visibility,display;transition-duration:.2s;transition-timing-function:ease-in-out}#MonnifyPreLoader .lds-spinner{top:50%;margin-top:-40px}.lds-spinner{color:#005f7d;display:inline-block;position:relative;width:64px;height:64px}.lds-spinner div{transform-origin:32px 32px;animation:lds-spinner 1.2s linear infinite}.lds-spinner div:after{content:" ";display:block;position:absolute;top:3px;left:29px;width:5px;height:14px;border-radius:20%;background:#005f7d}.lds-spinner div:nth-child(1){transform:rotate(0);animation-delay:-1.1s}.lds-spinner div:nth-child(2){transform:rotate(30deg);animation-delay:-1s}.lds-spinner div:nth-child(3){transform:rotate(60deg);animation-delay:-.9s}.lds-spinner div:nth-child(4){transform:rotate(90deg);animation-delay:-.8s}.lds-spinner div:nth-child(5){transform:rotate(120deg);animation-delay:-.7s}.lds-spinner div:nth-child(6){transform:rotate(150deg);animation-delay:-.6s}.lds-spinner div:nth-child(7){transform:rotate(180deg);animation-delay:-.5s}.lds-spinner div:nth-child(8){transform:rotate(210deg);animation-delay:-.4s}.lds-spinner div:nth-child(9){transform:rotate(240deg);animation-delay:-.3s}.lds-spinner div:nth-child(10){transform:rotate(270deg);animation-delay:-.2s}.lds-spinner div:nth-child(11){transform:rotate(300deg);animation-delay:-.1s}.lds-spinner div:nth-child(12){transform:rotate(330deg);animation-delay:0s}@keyframes lds-spinner{0%{opacity:1}100%{opacity:0}}',t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",n.id=CONSTANT.StyleId,n.styleSheet?(n.styleSheet.cssText=e,n.styleSheet.insertRule(e,0)):n.appendChild(document.createTextNode(e)),t.appendChild(n)},stringifyAndEscape=function(e){return JSON.stringify(e).replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;")},setupPaymentForm=function(e){if(stageData.stageDOM){var t=document.getElementsByName(CONSTANT.PaymentFormName);if(t&&0<t.length)try{(t=t[0]).parentNode.removeChild(t)}catch(a){console.error("Monnify: Error occurred while removing existing payment form"+a)}var n='<form name="'+CONSTANT.PaymentFormName+'" id="'+CONSTANT.PaymentFormName+'" action="'+getConfiguration(e).APP_URL+'" method="post" enctype="application/x-www-form-urlencoded" target="'+CONSTANT.StageId+'"><input type="hidden" name="amount" value="'+e.amount+'" /><input type="hidden" name="sourceUrl" value="'+fetchSourceUrl()+'"/><input type="hidden" name="currency" value="'+e.currency+'"/><input type="hidden" name="paymentReference" value="'+e.reference+'"/><input type="hidden" name="customerFullName" value="'+e.customerFullName+'"/><input type="hidden" name="customerEmail" value="'+e.customerEmail+'"/><input type="hidden" name="customerMobileNumber" value="'+e.customerMobileNumber+'"/><input type="hidden" name="paymentDescription" value="'+e.paymentDescription+'"/><input type="hidden" name="paymentMethods" value="'+stringifyAndEscape(e.paymentMethods)+'"/><input type="hidden" name="metadata" value="'+stringifyAndEscape(e.metadata)+'"/><input type="hidden" name="incomeSplitConfig" value="'+stringifyAndEscape(e.incomeSplitConfig)+'"/><input type="hidden" name="apiKey" value="'+e.apiKey+'"/><input type="hidden" name="contractCode" value="'+e.contractCode+'"/></form>';document.body.insertAdjacentHTML("beforeend",n)}},addMessageListener=function(n){var a=function(e){if(e.source&&e.source.parent===window.self&&e.origin===getConfiguration(n).APP_ORIGIN){var t=e[e.message?"message":"data"];if(t)switch((t=JSON.parse(t)).type){case CONSTANT.LoadedMessageType:handlePopupLoadedMessage();break;case CONSTANT.ClosePopupMessageType:this.window.removeEventListener("message",a),handleClosePopupMessage(n,t.message);break;case CONSTANT.TransactionCompletedMessageType:handleTransactionCompleteMessage(n,t.message)}}};window.addEventListener("message",a)},handlePopupLoadedMessage=function(){show(stageData.stageDOM),hide(stageData.preLoader)},handleClosePopupMessage=function(e,t){callFunction(e.onClose,t),t.redirectUrl&&t.redirectUrl!==fetchSourceUrl()&&(window.location.href=t.redirectUrl),closeStage()},handleTransactionCompleteMessage=function(e,t){callFunction(e.onComplete,t)},parseFunction=function(fnString){if(!fnString)return fnString;try{var fn,fn="function"==typeof fnString?fnString:eval(fnString);return fn}catch(e){return fnString}},callFunction=function(e,t){e&&e(t)},setupLoader=function(){var e,t=document.getElementById(CONSTANT.PreLoaderId);t?stageData.preLoader=t:(e='<div class="'+CONSTANT.PreLoaderId+' hide" id="'+CONSTANT.PreLoaderId+'"><div class="lds-spinner"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div>',document.body.insertAdjacentHTML("beforeend",e),stageData.preLoader=document.getElementById(CONSTANT.PreLoaderId))},closeStage=function(){var e;stageData.stageDOM&&((e=document.forms[CONSTANT.PaymentFormName])&&e.parentNode.removeChild(e),hide(stageData.stageDOM),clearStage())},clearStage=function(){stageData.stageDOM&&(stageData.stageDOM.src="about:blank")},hide=function(e){e.className=e.className.replace(/(?:^|\s)show(?!\S)/g,""),e.className.match(/(?:^|\s)hide(?!\S)/g)||(e.className+=" hide")},show=function(e){e.className=e.className.replace(/(?:^|\s)hide(?!\S)/g,""),e.className.match(/(?:^|\s)hide(?!\S)/g)||(e.className+=" show")},bindAction=function(e){var f;e&&(f=function(){},e.addEventListener("click",function(e){var t=e.target,n=t.getAttribute(CONSTANT.AttributePrefix+"amount"),a=t.getAttribute(CONSTANT.AttributePrefix+"reference"),i=t.getAttribute(CONSTANT.AttributePrefix+"payment-description"),r=t.getAttribute(CONSTANT.AttributePrefix+"currency"),o=t.getAttribute(CONSTANT.AttributePrefix+"api-key"),s=t.getAttribute(CONSTANT.AttributePrefix+"customer-full-name"),d=t.getAttribute(CONSTANT.AttributePrefix+"customer-email"),c=t.getAttribute(CONSTANT.AttributePrefix+"customer-mobile-number"),m=t.getAttribute(CONSTANT.AttributePrefix+"contract-code"),u=t.getAttribute(CONSTANT.AttributePrefix+"onComplete"),l=t.getAttribute(CONSTANT.AttributePrefix+"onClose"),p=t.getAttribute(CONSTANT.AttributePrefix+"metadata");initializeSDK({amount:n,reference:a,currency:r,apiKey:o,customerFullName:s,customerMobileNumber:c,customerEmail:d,contractCode:m,paymentDescription:i,metadata:p||{},onComplete:u||f,onClose:l||f})}))},fetchSourceUrl=function(){return document.location.href},bootstrap=function(){var e=document.getElementsByClassName(CONSTANT.MonnifyButtonIdentifier);if(!(e&&e.length<1))for(var t=0;t<e.length;t++){var n=e[t];bindAction(n)}};window.addEventListener("DOMContentLoaded",function(){var a,t,e,i=document.getElementsByClassName("flwpug_getpaid");if(i&&0<i.length&&((e=document.createElement("BUTTON")).textContent=i[0].getAttribute("data-pay_button_text"),e.addEventListener("click",function(e){e.preventDefault();var n=i[0].getAttribute("data-redirect_url"),t=i[0].getAttribute("data-customer_firstname")||"";t+=" "+(i[0].getAttribute("data-customer_lastname")||""),initializeSDK({compatibilityMode:!0,amount:i[0].getAttribute("data-amount"),currency:i[0].getAttribute("data-currency"),reference:i[0].getAttribute("data-txref"),customerEmail:i[0].getAttribute("data-customer_email"),contractCode:"N/A",customerFullName:t,apiKey:i[0].getAttribute("data-PBFPubKey"),paymentDescription:i[0].getAttribute("data-custom_description"),onClose:function(e){var t={name:"opop",data:{data:{responsecode:"00",responsetoken:"mocktoken",responsemessage:"successful"},airtime_flag:null},tx:{txRef:e.paymentReference,orderRef:e.transactionReference,cycle:"one-time",amount:e.authorizedAmount,charged_amount:e.authorizedAmount,chargeResponseCode:"00",chargeResponseMessage:e.message,currency:i[0].getAttribute("data-currency"),status:e.status,vbvrespmessage:e.status,vbvrespcode:"00",paymentType:"card",fraud_status:"ok",charge_type:"normal",is_live:-1<i[0].getAttribute("data-PBFPubKey").indexOf("MK_PROD_"),customer:{phone:i[0].getAttribute("data-customer_phone"),email:i[0].getAttribute("data-customer_email")}},success:"SUCCESS"===e.status||"PAID"===e.paymentStatus};window.location.href=n+"?resp="+encodeURIComponent(JSON.stringify(t))}})}),i[0].appendChild(e)),document.currentScript)a=document.currentScript;else{var n=document.getElementsByTagName("script");if(n&&0<n.length)for(var r=0;r<n.length;r++){var o=n[r].getAttribute("src");o&&-1<o.indexOf("monnify")&&(a=n[r])}}!a||(t=a.getAttribute("data-ref"))&&((e=document.createElement("BUTTON")).textContent="Pay with Monnify",e.addEventListener("click",function(e){e.preventDefault(),initializeSDK({compatibilityMode:!0,amount:parseInt(a.getAttribute("data-amount"))/100,currency:"NGN",reference:t,customerEmail:a.getAttribute("data-email"),contractCode:"N/A",apiKey:a.getAttribute("data-key"),onClose:function(e){var t=document.createElement("INPUT");t.setAttribute("type","hidden"),t.setAttribute("name","reference"),t.setAttribute("value",e.paymentReference),a.parentNode.appendChild(t);var n=document.createElement("INPUT");n.setAttribute("type","hidden"),n.setAttribute("name","paystack-trxref"),n.setAttribute("value",e.paymentReference),a.parentNode.appendChild(n),a.parentNode.submit()}})}),a.parentNode.appendChild(e))});var setup=function(n){var e=function(e){var t={reference:e.paymentReference,trans:e.transactionReference,status:"SUCCESS"===e.status||"PAID"===e.paymentStatus?"success":"failed",message:"SUCCESS"===e.status||"PAID"===e.paymentStatus?"Approved":"Failed",transaction:e.transactionReference,trxref:e.paymentReference};n.callback(t)},t=(n.firstname||"")+" "+(n.lastname||""),a=n.currency,i=parseInt(n.amount)/100,r=t+" "+a+" "+i;return{openIframe:function(){MonnifySDK.initialize({compatibilityMode:!0,paymentDescription:r,amount:i,currency:n.currency,reference:n.ref,customerFullName:t,customerEmail:n.email,contractCode:n.contractCode||"N/A",apiKey:n.key,onComplete:e,onClose:n.onClose,metadata:n.metadata})}}};return{bootstrap:bootstrap,initialize:initializeSDK,setup:setup}}(),getpaidSetup=function(n){var e=n.customer_firstname||"";return e+=" "+(n.customer_lastname||""),MonnifySDK.initialize({compatibilityMode:!0,paymentDescription:"",amount:n.amount,currency:n.currency,reference:n.txref,customerFullName:e,customerEmail:n.customer_email,customerMobileNumber:n.customer_phone,contractCode:"N/A",apiKey:n.PBFPubKey,onComplete:function(e){var t={name:"opop",data:{data:{responsecode:"00",responsetoken:"mocktoken",responsemessage:"successful"},airtime_flag:null},tx:{txRef:e.paymentReference,orderRef:e.transactionReference,cycle:"one-time",amount:e.authorizedAmount,charged_amount:e.authorizedAmount,chargeResponseCode:"00",chargeResponseMessage:e.message,currency:n.currency,status:e.status,vbvrespmessage:e.status,vbvrespcode:"00",paymentType:"card",fraud_status:"ok",charge_type:"normal",is_live:-1<n.PBFPubKey.indexOf("MK_PROD_"),customer:{phone:n.customer_phone,email:n.customer_email}},success:"SUCCESS"===e.status||"PAID"===e.paymentStatus};n.callback(t)},onClose:n.onclose,metadata:n.meta.reduce(function(t,n){return Object.keys(n).forEach(function(e){t[e]=n[e]}),t}),paymentDescription:n.custom_description||""}),{close:function(){var e=document.getElementById("MonnifyFrame");e&&e.remove()}}};