{"remainingRequest":"/Users/dduru/VSCode/OmarzeUI/node_modules/babel-loader/lib/index.js!/Users/dduru/VSCode/OmarzeUI/node_modules/ts-loader/index.js??ref--13-2!/Users/dduru/VSCode/OmarzeUI/src/interceptors/InterceptorRegistry.ts","dependencies":[{"path":"/Users/dduru/VSCode/OmarzeUI/src/interceptors/InterceptorRegistry.ts","mtime":1587502499590},{"path":"/Users/dduru/VSCode/OmarzeUI/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/dduru/VSCode/OmarzeUI/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/dduru/VSCode/OmarzeUI/node_modules/ts-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmRlc2NyaXB0aW9uIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLml0ZXJhdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvciI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiL1VzZXJzL2RkdXJ1L1ZTQ29kZS9PbWFyemVVSS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2siOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIi9Vc2Vycy9kZHVydS9WU0NvZGUvT21hcnplVUkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKaW1wb3J0IHsgTG9nIH0gZnJvbSAnQC9jb21wb25lbnRzL3V0aWwnOwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwoKdmFyIEludGVyY2VwdG9yUmVnaXN0cnkgPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBJbnRlcmNlcHRvclJlZ2lzdHJ5KCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEludGVyY2VwdG9yUmVnaXN0cnkpOwogIH0KCiAgX2NyZWF0ZUNsYXNzKEludGVyY2VwdG9yUmVnaXN0cnksIG51bGwsIFt7CiAgICBrZXk6ICJhZGRJbnRlcmNlcHRvciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gYWRkSW50ZXJjZXB0b3IoaW50ZXJjZXB0b3IpIHsKICAgICAgaWYgKCFwcm9jZXNzLmVudi5WVUVfQVBQX0VOQUJMRV9JTlRFUkNFUFRPUlMpIHsKICAgICAgICBMb2cuaW5mbygnSW50ZXJjZXB0b3JzIGRpc2FibGVkLiBJZ25vcmluZyBJbnRlcmNlcHRvciByZWdpc3RlcmF0aW9uLicpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdGhpcy5pbnRlcmNlcHRvcnMucHVzaChpbnRlcmNlcHRvcik7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0SW50ZXJjZXB0b3JCeVVybCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0SW50ZXJjZXB0b3JCeVVybCh1cmwpIHsKICAgICAgaWYgKCF1cmwpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZTsKICAgICAgdmFyIF9kaWRJdGVyYXRvckVycm9yID0gZmFsc2U7CiAgICAgIHZhciBfaXRlcmF0b3JFcnJvciA9IHVuZGVmaW5lZDsKCiAgICAgIHRyeSB7CiAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yID0gSW50ZXJjZXB0b3JSZWdpc3RyeS5pbnRlcmNlcHRvcnNbU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDsgIShfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gKF9zdGVwID0gX2l0ZXJhdG9yLm5leHQoKSkuZG9uZSk7IF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSB0cnVlKSB7CiAgICAgICAgICB2YXIgaSA9IF9zdGVwLnZhbHVlOwogICAgICAgICAgdmFyIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yID0gdHJ1ZTsKICAgICAgICAgIHZhciBfZGlkSXRlcmF0b3JFcnJvcjIgPSBmYWxzZTsKICAgICAgICAgIHZhciBfaXRlcmF0b3JFcnJvcjIgPSB1bmRlZmluZWQ7CgogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yMiA9IGkuaW50ZXJjZXB0Q29uZmlnc1tTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwMjsgIShfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiA9IChfc3RlcDIgPSBfaXRlcmF0b3IyLm5leHQoKSkuZG9uZSk7IF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yID0gdHJ1ZSkgewogICAgICAgICAgICAgIHZhciB1ID0gX3N0ZXAyLnZhbHVlOwoKICAgICAgICAgICAgICBpZiAodXJsLmluZGV4T2YodS51cmwpID4gLTEpIHsKICAgICAgICAgICAgICAgIHJldHVybiBpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgIF9kaWRJdGVyYXRvckVycm9yMiA9IHRydWU7CiAgICAgICAgICAgIF9pdGVyYXRvckVycm9yMiA9IGVycjsKICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiAmJiBfaXRlcmF0b3IyLnJldHVybiAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICBfaXRlcmF0b3IyLnJldHVybigpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgICBpZiAoX2RpZEl0ZXJhdG9yRXJyb3IyKSB7CiAgICAgICAgICAgICAgICB0aHJvdyBfaXRlcmF0b3JFcnJvcjI7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfZGlkSXRlcmF0b3JFcnJvciA9IHRydWU7CiAgICAgICAgX2l0ZXJhdG9yRXJyb3IgPSBlcnI7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiAmJiBfaXRlcmF0b3IucmV0dXJuICE9IG51bGwpIHsKICAgICAgICAgICAgX2l0ZXJhdG9yLnJldHVybigpOwogICAgICAgICAgfQogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICBpZiAoX2RpZEl0ZXJhdG9yRXJyb3IpIHsKICAgICAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3I7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfV0pOwoKICByZXR1cm4gSW50ZXJjZXB0b3JSZWdpc3RyeTsKfSgpOwoKZXhwb3J0IHsgSW50ZXJjZXB0b3JSZWdpc3RyeSBhcyBkZWZhdWx0IH07CkludGVyY2VwdG9yUmVnaXN0cnkuaW50ZXJjZXB0b3JzID0gW107Cgp2YXIgREVGQVVMVF9SRVNQT05TRV9JTlRFUkNFUFRPUiA9IGZ1bmN0aW9uIERFRkFVTFRfUkVTUE9OU0VfSU5URVJDRVBUT1IocmVzcG9uc2UpIHsKICByZXR1cm4gcmVzcG9uc2U7Cn07CgpheGlvcy5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoZnVuY3Rpb24gKGNvbmZpZykgewogIHZhciBpbnRlcmNlcHRvciA9IEludGVyY2VwdG9yUmVnaXN0cnkuZ2V0SW50ZXJjZXB0b3JCeVVybChjb25maWcudXJsKTsKCiAgaWYgKHByb2Nlc3MuZW52LlZVRV9BUFBfRU5BQkxFX0lOVEVSQ0VQVE9SUyAmJiBpbnRlcmNlcHRvcikgewogICAgdmFyIHJlbGF0aXZlVXJsUGF0aCA9IGNvbmZpZy51cmwgfHwgJyc7CiAgICBjb25maWcudXJsID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6MCcgKyBpbnRlcmNlcHRvci5nZXRNYXRjaGluZ1VybChyZWxhdGl2ZVVybFBhdGgpOwogICAgYXhpb3MuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLnVzZShERUZBVUxUX1JFU1BPTlNFX0lOVEVSQ0VQVE9SLCBmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgaWYgKGludGVyY2VwdG9yLmhhc01hdGNoaW5nVXJsKHJlbGF0aXZlVXJsUGF0aCkpIHsKICAgICAgICBpbnRlcmNlcHRvci5yZWplY3RlZFByb21pc2VIYW5kbGVyKGVycm9yKTsKICAgICAgfQogICAgfSk7CiAgfQoKICByZXR1cm4gY29uZmlnOwp9KTs="},{"version":3,"sources":["/Users/dduru/VSCode/OmarzeUI/src/interceptors/InterceptorRegistry.ts"],"names":[],"mappings":";;;;;;;;;AAAA,SAAS,GAAT,QAAoB,mBAApB;AACA,OAAO,KAAP,MAAqE,OAArE;;IAIqB,mB;;;;;;;;;mCAMY,W,EAAyB;AAClD,UAAI,CAAC,OAAO,CAAC,GAAR,CAAY,2BAAjB,EAA8C;AAC1C,QAAA,GAAG,CAAC,IAAJ,CAAS,4DAAT;AACA;AACH;;AAED,WAAK,YAAL,CAAkB,IAAlB,CAAuB,WAAvB;AACH;;;wCAGiC,G,EAAuB;AACrD,UAAI,CAAC,GAAL,EAAU;AACN;AACH;;AAHoD;AAAA;AAAA;;AAAA;AAKrD,6BAAgB,mBAAmB,CAAC,YAApC,8HAAkD;AAAA,cAAvC,CAAuC;AAAA;AAAA;AAAA;;AAAA;AAC9C,kCAAgB,CAAC,CAAC,gBAAlB,mIAAoC;AAAA,kBAAzB,CAAyB;;AAChC,kBAAI,GAAG,CAAC,OAAJ,CAAY,CAAC,CAAC,GAAd,IAAqB,CAAC,CAA1B,EAA6B;AACzB,uBAAO,CAAP;AACH;AACJ;AAL6C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMjD;AAXoD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAYxD;;;;;;SA5BgB,mB;AAGH,mBAAA,CAAA,YAAA,GAA+B,EAA/B;;AA+BlB,IAAM,4BAA4B,GAAG,SAA/B,4BAA+B,CAAC,QAAD,EAAiC;AAClE,SAAO,QAAP;AACH,CAFD;;AAKA,KAAK,CAAC,YAAN,CAAmB,OAAnB,CAA2B,GAA3B,CAA+B,UAAC,MAAD,EAAoC;AAC/D,MAAM,WAAW,GAAG,mBAAmB,CAAC,mBAApB,CAAwC,MAAM,CAAC,GAA/C,CAApB;;AAEA,MAAI,OAAO,CAAC,GAAR,CAAY,2BAAZ,IAA2C,WAA/C,EAA4D;AACxD,QAAM,eAAe,GAAG,MAAM,CAAC,GAAP,IAAc,EAAtC;AACA,IAAA,MAAM,CAAC,GAAP,GAAa,uBAAuB,WAAW,CAAC,cAAZ,CAA2B,eAA3B,CAApC;AAEA,IAAA,KAAK,CAAC,YAAN,CAAmB,QAAnB,CAA4B,GAA5B,CACI,4BADJ,EAEI,UAAC,KAAD,EAAsB;AAClB,UAAI,WAAW,CAAC,cAAZ,CAA2B,eAA3B,CAAJ,EAAiD;AAC7C,QAAA,WAAW,CAAC,sBAAZ,CAAmC,KAAnC;AACH;AACJ,KANL;AAQH;;AAED,SAAO,MAAP;AACH,CAlBD","sourcesContent":["import { Log } from '@/components/util';\nimport axios, { AxiosResponse, AxiosRequestConfig, AxiosError } from 'axios';\nimport IInterceptor from './IInterceptor';\n\n\nexport default class InterceptorRegistry {\n\n    \n    public static interceptors: IInterceptor[] = [];\n\n\n    public static addInterceptor(interceptor: IInterceptor) {\n        if (!process.env.VUE_APP_ENABLE_INTERCEPTORS) {\n            Log.info('Interceptors disabled. Ignoring Interceptor registeration.');\n            return;\n        }\n\n        this.interceptors.push(interceptor);\n    }\n\n\n    public static getInterceptorByUrl(url: string | undefined): IInterceptor | undefined {\n        if (!url) {\n            return;\n        }\n\n        for (const i of InterceptorRegistry.interceptors) {\n            for (const u of i.interceptConfigs) {\n                if (url.indexOf(u.url) > -1) {\n                    return i;\n                }\n            }\n        }\n    }\n\n\n}\n\n\nconst DEFAULT_RESPONSE_INTERCEPTOR = (response: AxiosResponse): any => {\n    return response;\n};\n\n\naxios.interceptors.request.use((config: AxiosRequestConfig): any => {\n    const interceptor = InterceptorRegistry.getInterceptorByUrl(config.url);\n\n    if (process.env.VUE_APP_ENABLE_INTERCEPTORS && interceptor) {\n        const relativeUrlPath = config.url || '';\n        config.url = 'http://localhost:0' + interceptor.getMatchingUrl(relativeUrlPath);\n\n        axios.interceptors.response.use(\n            DEFAULT_RESPONSE_INTERCEPTOR, \n            (error: AxiosError) => { \n                if (interceptor.hasMatchingUrl(relativeUrlPath)) {\n                    interceptor.rejectedPromiseHandler(error);\n                }\n            }\n        );\n    }\n\n    return config;\n});\n\n\n"],"sourceRoot":""}]}